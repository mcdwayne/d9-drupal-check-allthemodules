<?php

use Drupal\Core\Form\FormStateInterface;

/**
 * Implements hook_form_FORM_ID_alter().
 */
function taxonomy_protect_form_taxonomy_vocabulary_form_alter(&$form, FormStateInterface $form_state, $form_id) {
  if (!$protected_vids = \Drupal::config('taxonomy_protect.settings')->get('taxonomy_protect_vocabularies')) {
    return;
  }
  // Not needed when it's the create form or vid not in protected vids.
  if (empty($form['vid']['#default_value']) || empty($protected_vids[$form['vid']['#default_value']])) {
    return;
  }
  drupal_set_message(t('This vocabulary cannot be deleted.'), 'warning');
  $form['actions']['delete']['#access'] = FALSE;
}
