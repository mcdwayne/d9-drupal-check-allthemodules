<?php

/**
 * @file
 * Module file for flow_player_field.
 */

use Drupal\Core\Routing\RouteMatchInterface;
use Drupal\Core\Url;

/**
 * Implements hook_theme().
 */
function flow_player_field_theme() {
  return [
    'flow_player_iframe' => [
      'variables' => [
        'url' => '',
        'query' => [],
        'attributes' => [],
        'fragment' => '',
      ],
    ],
    'flow_player_html' => [
      'variables' => [
        'flowplayer_html' => '',
      ],
    ],
    'flow_player_field_missing_provider' => [
      'variables' => [],
    ],
  ];
}

/**
 * Implements hook_help().
 */
function flow_player_field_help($route_name, RouteMatchInterface $route_match) {
  if ($route_name !== 'help.page.flow_player_field') {
    return;
  }
  $links = [
    ':field_help' => \Drupal::moduleHandler()
      ->moduleExists('field_ui') ? Url::fromRoute('help.page', ['name' => 'field_ui'])
      ->toString() : '#',
    ':field_ui_help' => Url::fromRoute('help.page', ['name' => 'field'])
      ->toString(),
    ':flow_player_field_docs' => 'https://www.drupal.org/node/flow_player_field',
    ':project_page' => 'https://drupal.org/project/flow_player_field',
  ];
  $output = '';
  $output .= '<h3>' . t('About') . '</h3>';
  $output .= '<p>' . t('The Flow Player Field module provides a simple field type you can use to embed videos and their preview thumbnails from Flowplayer. See the <a href=":field_help">Field module help</a> and the <a href=":field_ui_help">Field UI help</a> pages for general information on fields and how to create and manage them. For more Flow Player Field help, see the <a href=":flow_player_field_docs">online community documentation</a> or the <a href=":project_page">module project page</a>.', $links) . '</p>';
  return $output;
}
